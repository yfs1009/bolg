"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[498],{6262:(e,t)=>{t.A=(e,t)=>{const n=e.__vccOpts||e;for(const[e,o]of t)n[e]=o;return n}},1507:(e,t,n)=>{n.r(t),n.d(t,{comp:()=>a,data:()=>p});var o=n(641);const r={},a=(0,n(6262).A)(r,[["render",function(e,t){return(0,o.uX)(),(0,o.CE)("div",null,t[0]||(t[0]=[(0,o.Lk)("h1",{id:"fetch",tabindex:"-1"},[(0,o.Lk)("a",{class:"header-anchor",href:"#fetch"},[(0,o.Lk)("span",null,"fetch")])],-1),(0,o.Lk)("h2",{id:"fetch-请求流",tabindex:"-1"},[(0,o.Lk)("a",{class:"header-anchor",href:"#fetch-请求流"},[(0,o.Lk)("span",null,"fetch 请求流")])],-1),(0,o.Lk)("div",null,[(0,o.eW)("fetch()是一个全局方法，提供一种简单，合理的方式跨网络获取资源。它的请求是基于Promise。"),(0,o.Lk)("br"),(0,o.Lk)("br"),(0,o.eW)("代码示例：")],-1),(0,o.Lk)("pre",null,'    try {\n        response = await fetch(app.chatbase+"api/chat_stream", {\n\t\t// response = await fetch("http://no3.ybinu.cn:33892/api/chat_stream", {\n            signal: signal,\n            method: \'post\',\n            body: JSON.stringify({\n                prompt: app.会话模式.问题 + app.问题,\n                temperature: app.temperature,\n                top_p: app.top_p,\n                max_length: app.max_length,\n                history: QA_history,\n                pdf: app.chatPDF,\n\t\t\t\tplayVideo:playVideo\n            }),\n            headers: {\n                \'Content-Type\': \'application/json\'\n            }\n        })\n        app.问题 = \'\'\t\t\n        const reader = response.body.getReader();\n        let buffer = \'\'\n        while (true) {\n            const { value, done } = await reader.read();\n\t\t\tconsole.log(value,"value")\n\t\t\tconsole.log(done,"done")\n            已排队到 = true\n            let res = new TextDecoder("utf-8").decode(value)\n\t\t\t// console.log(res,"res")\n            buffer += res\n\t\t\t// console.log(buffer,"buffer")\n            while (buffer.indexOf("///") > -1) {\n                if (buffer == \'/././\') {//应对网络问题\n                    done = true\n                    break\n                }\n                buffer = buffer.split("///")\n                当前会话.content = buffer[buffer.length - 2]\n\t\t\t\t// console.log(当前会话.content,"当前会话.content")\n                buffer = buffer[buffer.length - 1]\n\t\t\t\t// console.log(buffer,21212)\n            }\n\t\t\t// console.log(done,99999999999999)\n            if (done){\n            \t break\n            }\n        }\n    }catch (e) {\n\t\tconsole.log(e,"错误信息");\n    }\n',-1)]))}]]),p=JSON.parse('{"path":"/posts/fetch.html","title":"fetch","lang":"zh-CN","frontmatter":{"icon":"pen-to-square","date":"2024-11-26T00:00:00.000Z","category":["fetch"],"description":"fetch fetch 请求流 fetch()是一个全局方法，提供一种简单，合理的方式跨网络获取资源。它的请求是基于Promise。代码示例：","head":[["meta",{"property":"og:url","content":"https://mister-hope.github.io/bolg/posts/fetch.html"}],["meta",{"property":"og:site_name","content":"YFS"}],["meta",{"property":"og:title","content":"fetch"}],["meta",{"property":"og:description","content":"fetch fetch 请求流 fetch()是一个全局方法，提供一种简单，合理的方式跨网络获取资源。它的请求是基于Promise。代码示例："}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-11-26T09:27:46.000Z"}],["meta",{"property":"article:published_time","content":"2024-11-26T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-11-26T09:27:46.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"fetch\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2024-11-26T00:00:00.000Z\\",\\"dateModified\\":\\"2024-11-26T09:27:46.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Mr.YFS\\",\\"url\\":\\"https://mister-hope.com\\"}]}"]]},"headers":[{"level":2,"title":"fetch 请求流","slug":"fetch-请求流","link":"#fetch-请求流","children":[]}],"git":{"createdTime":1732613266000,"updatedTime":1732613266000,"contributors":[{"name":"youfusheng","email":"you9026131008@163.com","commits":1}]},"readingTime":{"minutes":0.71,"words":213},"filePathRelative":"posts/fetch.md","localizedDate":"2024年11月26日","excerpt":"\\n<h2>fetch 请求流</h2>\\n<div>fetch()是一个全局方法，提供一种简单，合理的方式跨网络获取资源。它的请求是基于Promise。<br><br>代码示例：</div>\\n<pre>    try {\\n        response = await fetch(app.chatbase+\\"api/chat_stream\\", {\\n\\t\\t// response = await fetch(\\"http://no3.ybinu.cn:33892/api/chat_stream\\", {\\n            signal: signal,\\n            method: \'post\',\\n            body: JSON.stringify({\\n                prompt: app.会话模式.问题 + app.问题,\\n                temperature: app.temperature,\\n                top_p: app.top_p,\\n                max_length: app.max_length,\\n                history: QA_history,\\n                pdf: app.chatPDF,\\n\\t\\t\\t\\tplayVideo:playVideo\\n            }),\\n            headers: {\\n                \'Content-Type\': \'application/json\'\\n            }\\n        })\\n        app.问题 = \'\'\\t\\t\\n        const reader = response.body.getReader();\\n        let buffer = \'\'\\n        while (true) {\\n            const { value, done } = await reader.read();\\n\\t\\t\\tconsole.log(value,\\"value\\")\\n\\t\\t\\tconsole.log(done,\\"done\\")\\n            已排队到 = true\\n            let res = new TextDecoder(\\"utf-8\\").decode(value)\\n\\t\\t\\t// console.log(res,\\"res\\")\\n            buffer += res\\n\\t\\t\\t// console.log(buffer,\\"buffer\\")\\n            while (buffer.indexOf(\\"///\\") &gt; -1) {\\n                if (buffer == \'/././\') {//应对网络问题\\n                    done = true\\n                    break\\n                }\\n                buffer = buffer.split(\\"///\\")\\n                当前会话.content = buffer[buffer.length - 2]\\n\\t\\t\\t\\t// console.log(当前会话.content,\\"当前会话.content\\")\\n                buffer = buffer[buffer.length - 1]\\n\\t\\t\\t\\t// console.log(buffer,21212)\\n            }\\n\\t\\t\\t// console.log(done,99999999999999)\\n            if (done){\\n            \\t break\\n            }\\n        }\\n    }catch (e) {\\n\\t\\tconsole.log(e,\\"错误信息\\");\\n    }\\n</pre>","autoDesc":true}')}}]);